<!doctype html><html lang=en-us><head><meta http-equiv=x-clacks-overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=http://jessecanderson.dev/images/favicon.png><title>Chef on the Pi | { jessecanderson.dev }</title><meta name=title content="Chef on the Pi"><meta name=description content="A few weeks back I decided to replace my older Raspberry Pi for a new Raspberry Pi 3. I had no idea what I wanted to do with this amazing board when I bought it, but I did know that I wanted to see if I could get it to bootstrap to my Chef server. This was a very interesting process and I wanted to go through all the steps for anyone else who may want to bootstrap their Raspberry Pi for whatever reason."><meta name=keywords content="Chef,IoT,learning,"><meta property="og:title" content="Chef on the Pi"><meta property="og:description" content="A few weeks back I decided to replace my older Raspberry Pi for a new Raspberry Pi 3. I had no idea what I wanted to do with this amazing board when I bought it, but I did know that I wanted to see if I could get it to bootstrap to my Chef server. This was a very interesting process and I wanted to go through all the steps for anyone else who may want to bootstrap their Raspberry Pi for whatever reason."><meta property="og:type" content="article"><meta property="og:url" content="http://jessecanderson.dev/chef-on-the-pi/"><meta property="og:image" content="http://jessecanderson.dev/images/share.png"><meta property="article:section" content="blog"><meta property="article:published_time" content="2016-10-24T21:27:15-04:00"><meta property="article:modified_time" content="2016-10-24T21:27:15-04:00"><meta property="og:site_name" content="Hugo ʕ•ᴥ•ʔ Bear"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://jessecanderson.dev/images/share.png"><meta name=twitter:title content="Chef on the Pi"><meta name=twitter:description content="A few weeks back I decided to replace my older Raspberry Pi for a new Raspberry Pi 3. I had no idea what I wanted to do with this amazing board when I bought it, but I did know that I wanted to see if I could get it to bootstrap to my Chef server. This was a very interesting process and I wanted to go through all the steps for anyone else who may want to bootstrap their Raspberry Pi for whatever reason."><meta itemprop=name content="Chef on the Pi"><meta itemprop=description content="A few weeks back I decided to replace my older Raspberry Pi for a new Raspberry Pi 3. I had no idea what I wanted to do with this amazing board when I bought it, but I did know that I wanted to see if I could get it to bootstrap to my Chef server. This was a very interesting process and I wanted to go through all the steps for anyone else who may want to bootstrap their Raspberry Pi for whatever reason."><meta itemprop=datePublished content="2016-10-24T21:27:15-04:00"><meta itemprop=dateModified content="2016-10-24T21:27:15-04:00"><meta itemprop=wordCount content="638"><meta itemprop=image content="http://jessecanderson.dev/images/share.png"><meta itemprop=keywords content="Chef,IoT,learning,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:720px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px}div.highlight pre{background-color:initial;color:initial}div.highlight code{background-color:unset;color:unset}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style></head><body><header><a href=/ class=title><h2>{ jessecanderson.dev }</h2></a><nav><a href=/>Home</a>
<a href=/blog>Blog</a></nav></header><main><h1>Chef on the Pi</h1><p><i><time datetime=2016-10-24 pubdate>24 Oct, 2016</time></i></p><content><p>A few weeks back I decided to replace my older Raspberry Pi for a new Raspberry Pi 3. I had no idea what I wanted to do with this amazing board when I bought it, but I did know that I wanted to see if I could get it to bootstrap to my Chef server. This was a very interesting process and I wanted to go through all the steps for anyone else who may want to bootstrap their Raspberry Pi for whatever reason.</p><p>Over the next few steps, I will be going through all that I had to do and what I learned in order to get the Chef Client installed and configured on my Raspberry Pi.</p><ul><li>Update Ruby</li></ul><p>The first thing I had to do was update the version of Ruby that was installed on the Raspberry Pi. To do this, I ran the following commands:</p><p>Ok, there is a lot happening here&mldr;so let us break that down.</p><p>These commands will put us into root and then validate the version of Ruby that is currently installed.</p><p>This drops us into the /usr/src/ directory, downloads the latest (at the time of this writing) version of Ruby from the ruby-lang.org site. Please update the target here if you need to download different version of Ruby. After it is downloaded, we unpack the Ruby source and drop into that directory.</p><p>Ok, here is where I had to do some extra searching. The site I found the walkthrough on (which can be found at <a href=http://blog.ittoby.com/2016/04/installing-chef-on-raspberry-pi-23.html>itToby</a>) didn&rsquo;t talk about the SSL error that I was getting. During the configure command, it was not installing the correct openSSL packages into the Ruby package. I found the &ndash;with-openssl-dir=/usr/lib/ssl after hours of searching. Just validate that openSSl is installed as well as libssl-dev. These can be installed through the apt-get install options. Once the configure command completes then you can run the make command to make and install the new Ruby code.</p><p>There was an option that I saw on itToby post that had the command make -j4 that was suppose to multithread the make process. I didn&rsquo;t have any luck getting that to run and ended up just running the make install command solo. After it ran, I was able to run:</p><p>This validated the correct version of Ruby was installed on my Raspberry Pi.</p><ul><li>Install the Chef Client</li></ul><p>The next step was to install the Chef Client.</p><p>After the gem is installed, you should be able to run the chef-client -v command and see the chef-client version:</p><p><img src=/img/sockeyes51_2016-Oct-17.jpg alt=chef-client-image title="Chef-Client Version Check"></p><ul><li>Bootstrap!</li></ul><p>From here, you should be able to go to your Chef Workstation and run the following:</p><p>Ok, I&rsquo;m still new with Chef and the bootstrap process, but I had to include the &ndash;user-sudo-password and the &ndash;sudo commands to get it to work. The output does throw an error, don&rsquo;t worry about that error right now. It seems to be related to a Chef ARM client issue not being in the repo.</p><p>After the bootstrap process has been completed, you should see the Raspberry Pi inside of your Chef Management server. Login and verify. From here, you can now apply the chef-client cookbook to the Raspberry Pi runlist without any issues.</p><p>The only gotcha that I have run across is the NTP and time on the Raspberry Pi. For some reason, mine is not updating correctly so I have to manually update the time every now and again to make sure there isn&rsquo;t any error when the chef-client runs. If the time is more then 15 min different, then Chef will error out.</p><p>So, did you have any success bootstrapping your own Raspberry Pi? Did you have to do anything different then what I did? Any hints, help on improving the process? Let me know in the comments and I hope you find this helpful!</p></content><p><a href=http://jessecanderson.dev/blog/chef/>#chef</a>
<a href=http://jessecanderson.dev/blog/iot/>#IoT</a>
<a href=http://jessecanderson.dev/blog/learning/>#learning</a></p></main><footer>Made with <a href=https://github.com/janraasch/hugo-bearblog/>Hugo ʕ•ᴥ•ʔ Bear</a></footer></body></html>